import { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/shared/ui/card';
import { Button } from '@/shared/ui/button';
import { Badge } from '@/shared/ui/badge';
import {
    Upload,
    Search,
    Filter,
    FileText,
    Star,
    Clock,
    Archive,
    History,
} from 'lucide-react';
import { Link } from 'react-router-dom';

const documents = [
    {
        id: 1,
        title: '–ò—Å–∫–æ–≤–æ–µ –∑–∞—è–≤–ª–µ–Ω–∏–µ.pdf',
        case: '–¢—Ä—É–¥–æ–≤–æ–π —Å–ø–æ—Ä - —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ',
        author: '–ò–≤–∞–Ω–æ–≤ –ü.–ê.',
        type: '–ò—Å–∫',
        size: '2.4 MB',
        date: '15 –æ–∫—Ç 2025',
        versions: 3,
        status: 'final',
        statusText: '–§–∏–Ω–∞–ª',
        favorite: true,
    },
    {
        id: 2,
        title: '–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã –ø–æ–º–µ—â–µ–Ω–∏—è.pdf',
        case: '–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã',
        author: '–û–û–û "–¢–µ—Ö–Ω–æ–°—Ç—Ä–æ–π"',
        type: '–î–æ–≥–æ–≤–æ—Ä',
        size: '1.8 MB',
        date: '14 –æ–∫—Ç 2025',
        versions: 2,
        status: 'review',
        statusText: '–ü—Ä–æ–≤–µ—Ä–∫–∞',
        favorite: false,
    },
    {
        id: 3,
        title: '–¢—Ä—É–¥–æ–≤–æ–π –¥–æ–≥–æ–≤–æ—Ä.pdf',
        case: '–¢—Ä—É–¥–æ–≤–æ–π —Å–ø–æ—Ä - —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ',
        author: '–ò–≤–∞–Ω–æ–≤ –ü.–ê.',
        type: '–î–æ–≥–æ–≤–æ—Ä',
        size: '1.5 MB',
        date: '12 –æ–∫—Ç 2025',
        versions: 2,
        status: 'final',
        statusText: '–§–∏–Ω–∞–ª',
        favorite: true,
    },
    {
        id: 4,
        title: '–ü—Ä–∏–∫–∞–∑ –æ–± —É–≤–æ–ª—å–Ω–µ–Ω–∏–∏.pdf',
        case: '–¢—Ä—É–¥–æ–≤–æ–π —Å–ø–æ—Ä - —É–≤–æ–ª—å–Ω–µ–Ω–∏–µ',
        author: '–ò–≤–∞–Ω–æ–≤ –ü.–ê.',
        type: '–ü—Ä–∏–∫–∞–∑',
        size: '856 KB',
        date: '10 –æ–∫—Ç 2025',
        versions: 1,
        status: 'draft',
        statusText: '–ß–µ—Ä–Ω–æ–≤–∏–∫',
        favorite: false,
    },
    {
        id: 5,
        title: '–í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∏—Å–∫.pdf',
        case: '–ù–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–µ–ª–æ',
        author: '–°–º–∏—Ä–Ω–æ–≤–∞ –ê.–í.',
        type: '–í–æ–∑—Ä–∞–∂–µ–Ω–∏–µ',
        size: '3.2 MB',
        date: '8 –æ–∫—Ç 2025',
        versions: 4,
        status: 'review',
        statusText: '–ü—Ä–æ–≤–µ—Ä–∫–∞',
        favorite: false,
    },
    {
        id: 6,
        title: '–î–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.pdf',
        case: '–î–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã',
        author: '–û–û–û "–¢–µ—Ö–Ω–æ–°—Ç—Ä–æ–π"',
        type: '–î–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å',
        size: '456 KB',
        date: '5 –æ–∫—Ç 2025',
        versions: 1,
        status: 'final',
        statusText: '–§–∏–Ω–∞–ª',
        favorite: true,
    },
];

export default function DocumentsPage() {
    const [searchQuery, setSearchQuery] = useState('');
    const [filterType, setFilterType] = useState<'all' | 'favorite'>('all');

    const filteredDocuments = documents.filter(doc => {
        const matchesSearch = doc.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
            doc.case.toLowerCase().includes(searchQuery.toLowerCase());
        const matchesFilter = filterType === 'all' || (filterType === 'favorite' && doc.favorite);
        return matchesSearch && matchesFilter;
    });

    const getStatusColor = (status: string) => {
        switch (status) {
            case 'final':
                return 'bg-green-100 text-green-700 border-green-200';
            case 'review':
                return 'bg-yellow-100 text-yellow-700 border-yellow-200';
            case 'draft':
                return 'bg-gray-100 text-gray-700 border-gray-200';
            default:
                return 'bg-blue-100 text-blue-700 border-blue-200';
        }
    };

    return (
        <div className="space-y-6">
            {/* Header */}
            <div className="flex items-center justify-between">
                <div>
                    <h1 className="text-2xl font-bold text-gray-900">–î–æ–∫—É–º–µ–Ω—Ç—ã</h1>
                    <p className="text-sm text-gray-600">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏ –≤–µ—Ä—Å–∏—è–º–∏</p>
                </div>
                <Button>
                    <Upload className="mr-2 h-4 w-4" />
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
                </Button>
            </div>

            {/* Stats */}
            <div className="grid grid-cols-1 gap-6 sm:grid-cols-4">
                <Card>
                    <CardContent className="p-6">
                        <div className="flex items-start justify-between">
                            <div>
                                <p className="text-sm text-gray-600">–í—Å–µ–≥–æ</p>
                                <p className="mt-2 text-3xl font-bold">156</p>
                            </div>
                            <div className="rounded-lg bg-blue-50 p-3">
                                <FileText className="h-5 w-5 text-blue-600" />
                            </div>
                        </div>
                    </CardContent>
                </Card>

                <Card>
                    <CardContent className="p-6">
                        <div className="flex items-start justify-between">
                            <div>
                                <p className="text-sm text-gray-600">–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</p>
                                <p className="mt-2 text-3xl font-bold">12</p>
                            </div>
                            <div className="rounded-lg bg-yellow-50 p-3">
                                <Clock className="h-5 w-5 text-yellow-600" />
                            </div>
                        </div>
                    </CardContent>
                </Card>

                <Card>
                    <CardContent className="p-6">
                        <div className="flex items-start justify-between">
                            <div>
                                <p className="text-sm text-gray-600">–ò–∑–±—Ä–∞–Ω–Ω—ã–µ</p>
                                <p className="mt-2 text-3xl font-bold">8</p>
                            </div>
                            <div className="rounded-lg bg-purple-50 p-3">
                                <Star className="h-5 w-5 text-purple-600" />
                            </div>
                        </div>
                    </CardContent>
                </Card>

                <Card>
                    <CardContent className="p-6">
                        <div className="flex items-start justify-between">
                            <div>
                                <p className="text-sm text-gray-600">–í–µ—Ä—Å–∏–π</p>
                                <p className="mt-2 text-3xl font-bold">34</p>
                            </div>
                            <div className="rounded-lg bg-green-50 p-3">
                                <History className="h-5 w-5 text-green-600" />
                            </div>
                        </div>
                    </CardContent>
                </Card>
            </div>

            {/* Filters */}
            <Card>
                <CardContent className="p-4">
                    <div className="flex items-center gap-4">
                        <div className="relative flex-1">
                            <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400" />
                            <input
                                type="text"
                                placeholder="–ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤..."
                                value={searchQuery}
                                onChange={(e) => setSearchQuery(e.target.value)}
                                className="w-full rounded-lg border py-2 pl-10 pr-4 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20"
                            />
                        </div>
                        <Button
                            variant={filterType === 'all' ? 'default' : 'outline'}
                            onClick={() => setFilterType('all')}
                        >
                            <Filter className="mr-2 h-4 w-4" />
                            –í—Å–µ —Ç–∏–ø—ã
                        </Button>
                        <Button
                            variant={filterType === 'favorite' ? 'default' : 'outline'}
                            onClick={() => setFilterType('favorite')}
                        >
                            <Star className="mr-2 h-4 w-4" />
                            –ò–∑–±—Ä–∞–Ω–Ω—ã–µ
                        </Button>
                        <select className="rounded-lg border px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20">
                            <option>–ü–æ –¥–∞—Ç–µ</option>
                            <option>–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
                            <option>–ü–æ —Ä–∞–∑–º–µ—Ä—É</option>
                        </select>
                    </div>
                </CardContent>
            </Card>

            {/* Documents List */}
            <Card>
                <CardHeader>
                    <CardTitle>–î–æ–∫—É–º–µ–Ω—Ç—ã ({filteredDocuments.length})</CardTitle>
                </CardHeader>
                <CardContent>
                    <div className="space-y-3">
                        {filteredDocuments.map((doc) => (
                            <Link
                                key={doc.id}
                                to={`/documents/${doc.id}`}
                                className="flex items-center gap-4 rounded-lg border p-4 transition-colors hover:bg-gray-50"
                            >
                                {/* Icon */}
                                <div className="rounded-lg bg-blue-50 p-3">
                                    <FileText className="h-6 w-6 text-blue-600" />
                                </div>

                                {/* Info */}
                                <div className="flex-1">
                                    <div className="flex items-start justify-between">
                                        <div>
                                            <div className="flex items-center gap-2">
                                                <h3 className="font-semibold text-gray-900">{doc.title}</h3>
                                                {doc.favorite && (
                                                    <Star className="h-4 w-4 fill-yellow-400 text-yellow-400" />
                                                )}
                                            </div>
                                            <div className="mt-1 flex items-center gap-3 text-sm text-gray-600">
                                                <span>üìÅ {doc.case}</span>
                                                <span>‚Ä¢</span>
                                                <span>üë§ {doc.author}</span>
                                                <span>‚Ä¢</span>
                                                <span>üìÑ {doc.type}</span>
                                            </div>
                                        </div>
                                        <Badge className={getStatusColor(doc.status)}>
                                            {doc.statusText}
                                        </Badge>
                                    </div>
                                </div>

                                {/* Meta */}
                                <div className="flex items-center gap-6 text-sm text-gray-600">
                                    <div>{doc.size}</div>
                                    <div>{doc.date}</div>
                                    <div className="flex items-center gap-1">
                                        <Archive className="h-4 w-4" />
                                        {doc.versions}
                                    </div>
                                </div>
                            </Link>
                        ))}
                    </div>
                </CardContent>
            </Card>
        </div>
    );
}
